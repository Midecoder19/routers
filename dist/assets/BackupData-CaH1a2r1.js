var o=Object.defineProperty;var c=(l,a,t)=>a in l?o(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t;var i=(l,a,t)=>c(l,typeof a!="symbol"?a+"":a,t);import{j as e,c as r,A as p,d}from"./ui-S_nOSzwm.js";import{a as h}from"./vendor-DMBppH6t.js";import{w as u}from"./index-CP-KW1uf.js";/* empty css                   */import"./router-Bs7SEBOK.js";import"./motion-DgYwA7z-.js";class m extends h.Component{constructor(t){super(t);i(this,"handleBackup",()=>{if(!this.state.fileName.trim()){this.setState({status:"âš ï¸ Please enter a valid file name before backup."});return}this.setState({status:"â³ Backing up data, please wait..."}),setTimeout(()=>{const s=[{name:this.state.fileName,type:this.state.backupType,date:new Date().toLocaleString(),content:`Backup of type: ${this.state.backupType}, created on ${new Date().toLocaleString()}`},...this.state.backups];localStorage.setItem("backups",JSON.stringify(s)),this.setState({backups:s,status:`âœ… Backup completed successfully as '${this.state.fileName}.zip'`,fileName:""})},2e3)});i(this,"handleRestore",t=>{if(!t){this.setState({status:"âš ï¸ Please select a file to restore."});return}this.setState({status:`â³ Restoring from '${t.name}'...`}),setTimeout(()=>{this.setState({status:`âœ… Restore completed successfully from '${t.name}'`,restoreFile:null})},2e3)});i(this,"handleDownload",t=>{const s=new Blob([t.content],{type:"application/zip"}),n=document.createElement("a");n.href=URL.createObjectURL(s),n.download=`${t.name}.zip`,n.click(),URL.revokeObjectURL(n.href)});i(this,"toggleDropdown",()=>{this.setState({showDropdown:!this.state.showDropdown})});i(this,"setBackupType",t=>{this.setState({backupType:t,showDropdown:!1})});i(this,"handleFileNameChange",t=>{this.setState({fileName:t.target.value})});i(this,"handleRestoreFileChange",t=>{const s=t.target.files[0];this.setState({restoreFile:s}),this.handleRestore(s)});this.state={backupType:"full",fileName:"",status:"",backups:JSON.parse(localStorage.getItem("backups"))||[],restoreFile:null,showDropdown:!1}}render(){return e.jsxs("div",{className:"backup-container",children:[e.jsxs("div",{className:"backup-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx(r,{size:28}),e.jsx("h2",{children:"Backup Data Files"})]}),e.jsxs("button",{className:"back-btn",onClick:()=>this.props.navigate("/common"),children:[e.jsx(p,{size:18})," Back"]})]}),e.jsxs("div",{className:"backup-card",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Backup Type:"}),e.jsxs("div",{className:"dropdown-wrapper",children:[e.jsxs("button",{className:"dropdown-btn",onClick:this.toggleDropdown,children:[this.state.backupType==="full"?"Full Backup":"Partial Backup"," â–¼"]}),this.state.showDropdown&&e.jsxs("div",{className:"dropdown-menu",children:[e.jsx("div",{onClick:()=>this.setBackupType("full"),children:"Full Backup"}),e.jsx("div",{onClick:()=>this.setBackupType("partial"),children:"Partial Backup"})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"File Name:"}),e.jsx("input",{type:"text",placeholder:"Enter backup file name (e.g., data_backup)",value:this.state.fileName,onChange:this.handleFileNameChange})]}),e.jsxs("div",{className:"form-group restore-group",children:[e.jsx("label",{children:"Restore File:"}),e.jsx("input",{type:"file",accept:".zip,.bak",onChange:this.handleRestoreFileChange})]}),e.jsx("div",{className:"button-group",children:e.jsxs("button",{className:"primary-btn",onClick:this.handleBackup,children:[e.jsx(d,{size:18})," Backup Now"]})}),this.state.status&&e.jsx("div",{className:`status-area ${this.state.status.includes("âœ…")?"success":"info"}`,children:this.state.status}),this.state.backups.length>0&&e.jsxs("div",{className:"backup-list",children:[e.jsx("h3",{children:"ðŸ“¦ Existing Backups:"}),e.jsx("ul",{children:this.state.backups.map((t,s)=>e.jsxs("li",{children:[e.jsxs("strong",{children:[t.name,".zip"]})," (",t.type," backup) - ",t.date,e.jsx("button",{className:"restore-btn",onClick:()=>this.handleRestore({name:t.name+".zip"}),children:"Restore"}),e.jsx("button",{className:"download-btn",onClick:()=>this.handleDownload(t),children:"Download"})]},s))})]})]})]})}}const N=u(m);export{N as default};
