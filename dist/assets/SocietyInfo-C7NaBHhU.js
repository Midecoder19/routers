var d=Object.defineProperty;var h=(i,o,t)=>o in i?d(i,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[o]=t;var a=(i,o,t)=>h(i,typeof o!="symbol"?o+"":o,t);import{j as e}from"./ui-S_nOSzwm.js";import{a as n}from"./vendor-DMBppH6t.js";import{w as m}from"./index-CP-KW1uf.js";/* empty css                    */import"./router-Bs7SEBOK.js";import"./motion-DgYwA7z-.js";class p extends n.Component{constructor(t){super(t);a(this,"setQuery",t=>this.setState({query:t}));a(this,"filtered",()=>{const t=(this.state.query||"").toLowerCase().trim();return t?(this.props.societies||[]).filter(s=>`${s.code} ${s.name}`.toLowerCase().includes(t)):this.props.societies||[]});this.state={query:""}}render(){const{onClose:t,onSelect:s}=this.props,r=this.filtered();return e.jsx("div",{className:"position-fixed top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center",style:{background:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(6px)",zIndex:1060},children:e.jsxs("div",{className:"card shadow-lg border-0",style:{width:"90%",maxWidth:600,borderRadius:"1rem",overflow:"hidden"},children:[e.jsxs("div",{className:"card-header bg-primary text-white d-flex justify-content-between align-items-center py-3 px-4",children:[e.jsx("h5",{className:"mb-0 fw-semibold",children:"ðŸ”‘ Society Lookup"}),e.jsx("button",{className:"btn btn-sm btn-light fw-semibold",onClick:t,children:"âœ– Close"})]}),e.jsxs("div",{className:"card-body p-4",children:[e.jsxs("div",{className:"mb-3 d-flex flex-wrap align-items-center gap-2",children:[e.jsx("input",{type:"text",className:"form-control form-control-sm flex-grow-1",placeholder:"Search by code or description...",value:this.state.query,onChange:l=>this.setQuery(l.target.value)}),e.jsxs("span",{className:"text-muted small",children:[r.length," result(s)"]})]}),e.jsx("div",{style:{maxHeight:360,overflowY:"auto"},children:e.jsxs("table",{className:"table table-hover align-middle mb-0",children:[e.jsx("thead",{className:"table-light position-sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"30%"},children:"Society Code"}),e.jsx("th",{children:"Description"})]})}),e.jsx("tbody",{children:r.length?r.map((l,c)=>e.jsxs("tr",{onClick:()=>s(l),style:{cursor:"pointer"},children:[e.jsx("td",{children:l.code}),e.jsx("td",{children:l.name})]},c)):e.jsx("tr",{children:e.jsx("td",{colSpan:"2",className:"text-center text-muted py-4",children:"No results found"})})})]})})]}),e.jsx("div",{className:"card-footer bg-light text-center text-muted small py-2",children:"ðŸ’¡ Tip: Click a row to autofill the form."})]})})}}class x extends n.Component{constructor(t){super(t);a(this,"clearForm",()=>{this.setState({formData:{code:"",name:"",street:"",town:"",state:"",country:"",phone:"",email:"",website:"",bank:"",bankTitle:"",smtpPassword:"",logo:""}})});a(this,"handleChange",t=>{this.setState({formData:{...this.state.formData,[t.target.name]:t.target.value}})});a(this,"handleLogoUpload",t=>{const s=t.target.files[0];if(!s)return;const r=new FileReader;r.onload=()=>this.setState({formData:{...this.state.formData,logo:r.result}}),r.readAsDataURL(s)});a(this,"handleClearLogo",()=>this.setState({formData:{...this.state.formData,logo:""}}));a(this,"handleAdd",()=>{if(!this.state.formData.code)return alert("Please enter a code before adding.");if(this.state.societies.find(s=>s.code===this.state.formData.code))return alert("Society code already exists.");this.setState({societies:[...this.state.societies,this.state.formData]}),alert("Society added successfully!"),this.clearForm()});a(this,"handleUpdate",()=>{if(!this.state.formData.code)return alert("Enter code to update society.");const t=this.state.societies.map(s=>s.code===this.state.formData.code?this.state.formData:s);this.setState({societies:t}),alert("Society updated successfully!")});a(this,"handleDelete",()=>{if(!this.state.formData.code)return alert("Enter code to delete society.");const t=this.state.societies.filter(s=>s.code!==this.state.formData.code);this.setState({societies:t}),alert("Society deleted!"),this.clearForm()});a(this,"handlePrint",()=>{if(!this.state.societies.length)return alert("No societies available.");this.setState({showReport:!0})});a(this,"handleSelectSociety",t=>{this.setState({formData:t,showLookup:!1})});this.state={societies:[],showLookup:!1,showReport:!1,formData:{code:"",name:"",street:"",town:"",state:"",country:"",phone:"",email:"",website:"",bank:"",bankTitle:"",smtpPassword:"",logo:""}}}componentDidMount(){const t=JSON.parse(localStorage.getItem("societies")||"[]");this.setState({societies:t})}componentDidUpdate(t,s){s.societies!==this.state.societies&&localStorage.setItem("societies",JSON.stringify(this.state.societies))}render(){return e.jsxs("div",{className:"society-page",children:[e.jsxs("div",{className:"society-header",children:[e.jsx("h2",{children:"ðŸ¢ Society Information"}),e.jsx("button",{className:"back-btn",onClick:()=>this.props.navigate("/common"),children:"â¬… Back"})]}),e.jsxs("div",{className:"toolbar",children:[e.jsx("button",{onClick:this.handleAdd,children:"âž• Add"}),e.jsx("button",{className:"primary",onClick:this.handleUpdate,children:"ðŸ’¾ Update"}),e.jsx("button",{onClick:this.handleDelete,children:"ðŸ—‘ Delete"}),e.jsx("button",{onClick:this.handlePrint,children:"ðŸ–¨ Print"})]}),e.jsxs("form",{className:"society-card",onSubmit:t=>t.preventDefault(),children:[e.jsxs("div",{className:"form-section",children:[e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group code-field",children:[e.jsx("label",{children:"Code:"}),e.jsxs("div",{className:"input-with-icon",children:[e.jsx("input",{type:"text",name:"code",value:this.state.formData.code,onChange:this.handleChange}),e.jsx("button",{type:"button",className:"key-btn",onClick:()=>this.setState({showLookup:!0}),children:"ðŸ”‘"})]})]}),[{label:"Name",name:"name"},{label:"Street",name:"street"},{label:"Town",name:"town"},{label:"State",name:"state"},{label:"Country",name:"country"},{label:"Telephone No",name:"phone"},{label:"Email Address",name:"email",type:"email"},{label:"Website",name:"website"},{label:"Bank",name:"bank"},{label:"Bank Title",name:"bankTitle"},{label:"SMTP Password",name:"smtpPassword",type:"password"}].map(t=>e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{children:[t.label,":"]}),e.jsx("input",{type:t.type||"text",name:t.name,value:this.state.formData[t.name],onChange:this.handleChange})]},t.name))]}),e.jsxs("div",{className:"logo-section",children:[e.jsx("div",{className:"logo-box",children:this.state.formData.logo?e.jsx("img",{src:this.state.formData.logo,alt:"Society Logo"}):e.jsx("span",{children:"No Logo"})}),e.jsx("input",{type:"file",accept:"image/*",onChange:this.handleLogoUpload}),e.jsx("button",{type:"button",className:"clear-logo-btn",onClick:this.handleClearLogo,children:"Clear Logo"})]})]}),e.jsxs("div",{className:"footer-buttons",children:[e.jsx("button",{type:"button",className:"primary",onClick:this.handleUpdate,children:"Save"}),e.jsx("button",{type:"button",className:"cancel-btn",onClick:()=>this.props.navigate("/dashboard"),children:"Cancel"})]})]}),this.state.showLookup&&e.jsx(p,{societies:this.state.societies,onClose:()=>this.setState({showLookup:!1}),onSelect:this.handleSelectSociety}),this.state.showReport&&e.jsx("div",{className:"report-overlay",children:e.jsxs("div",{className:"report-modal",children:[e.jsxs("div",{className:"report-header",children:[e.jsx("h3",{children:"ðŸ“‹ Society Summary Report"}),e.jsx("button",{className:"close-btn",onClick:()=>this.setState({showReport:!1}),children:"âœ–"})]}),e.jsx("div",{className:"report-body",children:this.state.societies.map(t=>e.jsxs("div",{className:"report-card",children:[e.jsxs("div",{className:"report-info",children:[e.jsx("strong",{children:t.name})," (",t.code,")",e.jsx("br",{}),t.street,", ",t.town,", ",t.state,", ",t.country,e.jsx("br",{}),"ðŸ“ž ",t.phone," | âœ‰ï¸ ",t.email,e.jsx("br",{}),"ðŸŒ ",t.website," ",e.jsx("br",{}),"ðŸ¦ ",t.bank," - ",t.bankTitle]}),t.logo&&e.jsx("div",{className:"report-logo",children:e.jsx("img",{src:t.logo,alt:t.name})})]},t.code))}),e.jsx("div",{className:"report-footer",children:e.jsx("button",{onClick:()=>this.setState({showReport:!1}),children:"Close"})})]})})]})}}const S=m(x);export{S as default};
